from aocd import data

# data = """3-5
# 10-14
# 16-20
# 12-18

# """

d_ranges, d_nums = data.split('\n\n')
ranges = []
for line in d_ranges.split("\n"):
    ranges.append(tuple(map(int, line.split('-'))))

# part_1 = 0
# for num in d_nums.split("\n"):
#     n = int(num)
#     for s, b in ranges:
#         if s <= n <= b:
#             part_1 += 1
#             break
# print(part_1)

ranges.sort()

new_ranges = []
current = ranges[0]
for new in ranges[1:]:
    if new[0] <= current[1] + 1:
        current = (current[0], max(current[1], new[1]))
    else:
        new_ranges.append(current)
        current = new
new_ranges.append(current)
ranges = new_ranges

# ranges = [(200130804562635, 200627436508318), (282205680076538, 288204148365205), (197367706051979, 197875715423953), (324263437487314, 328752496652334), (523251556997713, 528465263347348), (67047668535678, 67913482692576), (60429900138389, 61246450753054), (174524070580347, 176642094850059), (92808584661079, 95032020310075), (332425552532979, 339796783027409), (390752405015108, 391463094095096), (297536568936390, 299138001453584), (118938026767822, 118938026767822), (488231983930280, 490890577608199), (265297884318654, 270117640820655), (68211477569667, 68822537485579), (392838130316948, 396299236563500), (255299485336686, 258441557708871), (183989468241925, 189705911978624), (140828607398293, 150237869396843), (212483980535665, 220285479341682), (504329857659330, 510686499344028), (468639341240052, 471995924053559), (71094422634404, 79956334168583), (191295357504679, 191903414231269), (307816353278291, 311198523769088), (199477712556076, 199697152894148), (229793200366938, 229793200366938), (414151735749530, 418916159428217), (515752861706117, 517240983163832), (436073367113568, 440178466286909), (528465263347349, 528465263347349), (389207984173007, 389906379129380), (365104852820960, 368501478808518), (464659565484916, 468639341240050), (494673673180531, 501738840594796), (64555579362534, 65152408224129), (53225303332189, 58144999474876), (292173924004660, 297536568936389), (544025462998588, 550837866031455), (426399390108653, 430057216183012), (212483980535664, 212483980535664), (225442932341592, 229793200366937), (198381560930145, 198916762103742), (104194691604644, 107242067345172), (383191834050471, 383575018685197), (252355868012733, 255299485336684), (485258027231521, 488231983930279), (201412610818216, 208343977975156), (534734110721133, 538440891280125), (521809155835321, 522185209686347), (454036410361755, 458298571450139), (241948433153550, 249490962673617), (104194691604643, 104194691604643), (384091866632018, 384798681936929), (353305119319727, 360470561250677), (324263437487313, 324263437487313), (426399390108652, 426399390108652), (82867891321917, 87103330652185), (196061527753281, 196896739686192), (446821240016892, 449557896962705), (373244124379402, 381511852784906), (95032020310077, 99826694965244), (14937153814155, 17791961459810), (63641989029272, 64246382473947), (231852628525069, 236590410156996), (271987523440440, 279332981393330), (114751793386411, 118938026767821), (12588335542967, 14937153814154), (382139142765951, 382826940736857), (121232054988315, 126865645386304), (133593011960701, 137749067201114), (313536314359543, 319559714224561), (386464456075717, 388076604735272), (42850647196024, 49433310231818), (30732724447556, 36032225709590), (61661145391873, 63195102628592), (302910948853669, 307816353278289), (163880994187748, 167420299337055), (195065361078045, 195990208969915), (263190764409709, 265297884318653), (20615931574340, 28052221825264), (518403209093753, 520309798449606), (341941246139462, 351667341717423), (553747923986102, 556793222044970), (1232939683586, 7967425872051), (403982735555381, 408378185492832), (472586937424020, 482200173770213), (408378185492833, 408378185492833), (152696069684336, 159936636408220), (192919325855222, 193301919451154), (388317756059594, 388839122268188), (513765589403164, 515155132757999)]

# for i, r1 in enumerate(ranges):
#     j = i + 1
#     while j < len(ranges):
#         r2 = ranges[j]
#         if r1[0] < r2[0]:
#             sr = r1
#             br = r2
#         else:
#             sr = r2
#             br = r1
#         if sr[1] >= br[0]:
#             # overlap
#             r1 = (sr[0], br[1])
#             ranges[i] = r1
#             ranges[j] = ranges[-1]
#         else:
#             j += 1






# d_ranges, d_nums = data.split('\n\n')
# ranges = []
# for line in d_ranges.split("\n"):
#     r1 = tuple(map(int, line.split('-')))
#     j = 0
#     while j < len(ranges):
#         r2 = ranges[j]
#         if r1[0] < r2[0]:
#             sr = r1
#             br = r2
#         else:
#             sr = r2
#             br = r1
#         if sr[1] + 1 >= br[0]:
#             # overlap
#             r1 = (sr[0], br[1])
#             ranges[j] = ranges[-1]
#             ranges.pop()
#         else:
#             j += 1
#     ranges.append(r1)

print("\n".join(f"{a}-{b}" for a, b in sorted(ranges)))

print(sum(b - a + 1 for a, b in ranges))
                